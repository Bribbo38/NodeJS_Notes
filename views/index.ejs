<!DOCTYPE html>
<html lang="en">

<%- include('partials/head', { title: 'Home Page' }) %>

    <body class="bg-base-300 flex flex-col min-h-screen">
        <%- include('partials/header') %>

            <main class="flex-grow flex flex-col text-center min-h-screen">
                <div class="container mx-auto px-4 py-10">
                    <div class="flex justify-between items-center mb-6">
                        <h1 class="text-4xl font-bold text-green-500">Welcome back, <%= user.name %> <%= user.surname %>!</h1>
                        <a href="/notes/new" class="btn btn-primary"><i class="ri-add-circle-line"></i> Create New Note</a>
                    </div>
                    <p class="text-lg text-base-content mb-6">Manage your notes and tasks below:</p>

                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                        <% if (notes.length > 0) { %>
                            <% notes.forEach(note => { %>
                                <div class="card bg-base-100 shadow-lg relative h-[10rem]">
                                    <div class="card-body p-4 flex-grow">
                                        <h2 class="card-title text-xl font-semibold">
                                            <%= note.title %>
                                        </h2>

                                        <div class="relative overflow-hidden flex-grow">
                                            <pre class="text-left text-sm text-base-content line-clamp-5"><%= note.content || '' %></pre>
                                            <div class="absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-t from-base-100 to-transparent"></div>
                                        </div>
                                    </div>
                                    <div class="absolute bottom-4 right-4">
                                        <a href="/notes/delete/<%= note._id %>" class="btn btn-outline btn-error btn-sm"
                                            onclick="return confirm('Are you sure you want to delete this note?');">
                                            <i class="ri-delete-bin-line ri-lg"></i>
                                        </a>
                                        <a href="/notes/edit/<%= note._id %>" class="btn btn-outline btn-success btn-sm">
                                            <i class="ri-edit-line ri-lg"></i>
                                        </a>
                                    </div>
                                </div>
                            <% }) %>
                        <% } else { %>
                            <p class="text-lg text-gray-500">You have no notes yet. Add some!</p>
                        <% } %>
                    </div>
                </div>
            </main>

            <%- include('partials/footer') %>
    </body>

</html>
